:root{
  --bg: #ffffff;
  --fg: #111111;
  --muted:#555;
  --border:#e5e7eb;
  --panel:#ffffff;
  --btn:#222;
  --btn-text:#fff;
  --success: #28a745;
  --error: #dc3545;
}

[data-theme="dark"]{
  --bg:#0f1115;
  --fg:#e5e7eb;
  --muted:#a3a3a3;
  --border:#2a2f3a;
  --panel:#161a22;
  --btn:#2f81f7;
  --btn-text:#0b1020;
}

* { box-sizing: border-box; }
body { margin:0; font:14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Arial; color:var(--fg); background:var(--bg); }
.layout { display:grid; grid-template-columns: 280px 1fr; height:100vh; }
.sidebar { border-right:1px solid var(--border); padding:12px; display:flex; flex-direction:column; gap:12px; background:var(--panel); }
.side-header { display:flex; align-items:center; justify-content:space-between; }
.side-actions{ display:flex; gap:6px; }
.import-group { display:flex; flex-direction:column; gap:6px; }
.btn { background:var(--btn); color:var(--btn-text); border:none; padding:6px 10px; border-radius:8px; cursor:pointer; }
.btn:hover { opacity:.95; }
.groups { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:4px; }
.groups li { padding:6px 8px; border-radius:8px; cursor:pointer; border:1px solid transparent; }
.groups li.active { background:rgba(127,127,127,.15); font-weight:600; }
.groups li.dragover { border-color:#999; }
.add-group { display:flex; gap:6px; }
.add-group input { flex:1; }
.content { padding:12px; display:flex; flex-direction:column; gap:12px; }
.toolbar { display:grid; grid-template-columns: 1fr 1fr 2fr 1fr auto; gap:8px; }
input, select, textarea { padding:8px; border:1px solid var(--border); border-radius:8px; background:var(--panel); color:var(--fg); width: 100%; font-family: inherit; }
.list { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:8px; overflow:auto; flex:1; }
.item { display:grid; grid-template-columns: 20px 24px 1fr auto; gap:10px; align-items:center; padding:8px; border:1px solid var(--border); border-radius:10px; background:var(--panel); }
.item .favicon {
  width: 20px;
  height: 20px;
  border-radius: 4px;
  background-color: var(--border);
}
.item-content { display:flex; flex-direction:column; gap:4px; overflow: hidden; }
.item .title { font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.item .url { color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.item .taglist { color:var(--muted); font-size:12px; opacity:.9; }
.item .taglist .tag { cursor: pointer; background: rgba(127,127,127,0.1); padding: 2px 5px; border-radius: 4px; margin-right: 4px; }
.item .taglist .tag:hover { background: rgba(127,127,127,0.2); }
/* НОВЫЙ КОД: Стили для заметки */
.item .notes-display {
  font-size: 13px;
  color: var(--muted);
  white-space: pre-wrap;
  margin-top: 4px;
  padding-left: 2px;
}
.item .pin { cursor:pointer; user-select:none; opacity:.4; }
.item.pinned .pin { opacity:1; }
.item.dragging { opacity:.6; }
.item-actions { display:flex; gap:6px; }

/* Inline Editing */
.item .edit-view, .item .edit-actions { display: none; }
.item.editing .display-view, .item.editing .display-actions { display: none; }
.item.editing .edit-view, .item.editing .edit-actions { display: flex; }
.item.editing .edit-view { flex-direction: column; gap: 6px; }
.item.editing .edit-actions { gap: 6px; }

/* Notifications */
#notifications { position: fixed; bottom: 20px; right: 20px; z-index: 1000; display: flex; flex-direction: column; gap: 10px; }
.toast { padding: 12px 18px; border-radius: 8px; color: #fff; font-weight: 500; opacity: 0; transform: translateX(100%); animation: slideIn 0.3s forwards; }
.toast.info { background: var(--btn); }
.toast.success { background: var(--success); }
.toast.error { background: var(--error); }
@keyframes slideIn { to { opacity: 1; transform: translateX(0); } }

/* Modal */
.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center; z-index: 100; }
.modal-content { background: var(--bg); padding: 24px; border-radius: 12px; width: 90%; max-width: 400px; display: flex; flex-direction: column; gap: 12px; border: 1px solid var(--border); }
.modal-actions { display: flex; justify-content: flex-end; gap: 8px; margin-top: 12px; }

/* Стили для кнопки удаления группы */
.groups li {
  position: relative;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.delete-group-btn {
  display: none; /* Скрыта по умолчанию */
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 16px;
  line-height: 1;
  padding: 2px 4px;
  border-radius: 4px;
  color: var(--muted);
  font-weight: bold;
}

.groups li:hover .delete-group-btn {
  display: block; /* Показываем при наведении */
}

.delete-group-btn:hover {
  color: var(--fg);
  background-color: rgba(127,127,127,.1);
}

/* ===================================== */
/* НОВОЕ: Стили для статуса ссылки       */
/* ===================================== */
.link-status-icon {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    margin-left: 8px;
    display: inline-block;
    vertical-align: middle;
    flex-shrink: 0; /* Чтобы иконка не сжималась */
}

/* Статус: OK */
.link-status-icon.status-ok {
    background-color: #28a745; /* Зеленый */
    border: 1px solid #1e7e34;
}
.link-status-icon.status-ok::after {
    content: '✓'; /* Галочка */
    color: white;
    font-size: 10px;
    line-height: 16px;
    text-align: center;
    display: block;
}

/* Статус: Broken/Error/Timeout/Unknown/Unchecked */
.link-status-icon.status-broken,
.link-status-icon.status-error,
.link-status-icon.status-timeout {
    background-color: #dc3545; /* Красный */
    border: 1px solid #bd2130;
}
.link-status-icon.status-broken::after,
.link-status-icon.status-error::after,
.link-status-icon.status-timeout::after {
    content: '✕'; /* Крестик */
    color: white;
    font-size: 10px;
    line-height: 16px;
    text-align: center;
    display: block;
}

.link-status-icon.status-unchecked,
.link-status-icon.status-unknown {
    background-color: #6c757d; /* Серый */
    border: 1px solid #545b62;
}
.link-status-icon.status-unchecked::after,
.link-status-icon.status-unknown::after {
    content: '?'; /* Вопрос */
    color: white;
    font-size: 10px;
    line-height: 16px;
    text-align: center;
    display: block;
}

/* Выравнивание иконок внутри bookmark-item */
.bookmark-item .display-mode {
    display: flex;
    align-items: center; /* Выравнивание по центру */
    gap: 8px; /* Небольшой отступ между элементами */
    flex-wrap: wrap; /* Если места мало, переносить элементы */
}

.bookmark-item .title {
    flex-grow: 1; /* Чтобы название занимало доступное место */
    min-width: 150px; /* Минимальная ширина для названия */
}

.bookmark-item .url {
    flex-grow: 1;
    min-width: 150px;
    max-width: 300px; /* Ограничим ширину URL, чтобы не растягивался сильно */
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.bookmark-item .taglist {
    flex-shrink: 0; /* Не сжимать список тегов */
}

.bookmark-item .actions {
    margin-left: auto; /* Прижимаем кнопки к правому краю */
    flex-shrink: 0;
    display: flex;
    align-items: center;
    gap: 4px;
}
